(function(t){function e(e){for(var o,n,s=e[0],l=e[1],c=e[2],d=0,u=[];d<s.length;d++)n=s[d],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&u.push(r[n][0]),r[n]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);h&&h(e);while(u.length)u.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],o=!0,n=1;n<i.length;n++){var s=i[n];0!==r[s]&&(o=!1)}o&&(a.splice(e--,1),t=l(l.s=i[0]))}return t}var o={},n={app:0},r={app:0},a=[];function s(t){return l.p+"js/"+({about:"about"}[t]||t)+"."+{about:"c8019381","chunk-098fe5b4":"7a62869f","chunk-2f787f44":"c4e416c0","chunk-5195114d":"a3b53afb","chunk-c382e2c8":"ddda03cd","chunk-ddefc104":"819e6172"}[t]+".js"}function l(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.e=function(t){var e=[],i={"chunk-098fe5b4":1,"chunk-2f787f44":1,"chunk-5195114d":1,"chunk-c382e2c8":1,"chunk-ddefc104":1};n[t]?e.push(n[t]):0!==n[t]&&i[t]&&e.push(n[t]=new Promise((function(e,i){for(var o="css/"+({about:"about"}[t]||t)+"."+{about:"31d6cfe0","chunk-098fe5b4":"05168054","chunk-2f787f44":"05168054","chunk-5195114d":"05168054","chunk-c382e2c8":"05168054","chunk-ddefc104":"05168054"}[t]+".css",r=l.p+o,a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var c=a[s],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===o||d===r))return e()}var u=document.getElementsByTagName("style");for(s=0;s<u.length;s++){c=u[s],d=c.getAttribute("data-href");if(d===o||d===r)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var o=e&&e.target&&e.target.src||r,a=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=o,delete n[t],h.parentNode.removeChild(h),i(a)},h.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){n[t]=0})));var o=r[t];if(0!==o)if(o)e.push(o[2]);else{var a=new Promise((function(e,i){o=r[t]=[e,i]}));e.push(o[2]=a);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=s(t);var u=new Error;c=function(e){d.onerror=d.onload=null,clearTimeout(h);var i=r[t];if(0!==i){if(i){var o=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+o+": "+n+")",u.name="ChunkLoadError",u.type=o,u.request=n,i[1](u)}r[t]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(e)},l.m=t,l.c=o,l.d=function(t,e,i){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)l.d(i,o,function(e){return t[e]}.bind(null,o));return i},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/vue-block-editor/",l.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var h=d;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},2436:function(t,e,i){"use strict";i("591e")},2521:function(t,e,i){"use strict";i("d868")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var o=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},r=[],a=(i("7faf"),i("2877")),s={},l=Object(a["a"])(s,n,r,!1,null,null,null),c=l.exports,d=(i("d3b7"),i("3ca3"),i("ddb0"),i("8c4f")),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("block-editor",{ref:"blockEditor",attrs:{values:t.newData,blocksExclude:["calc"],layout:{menu:!0,propertyEditor:!0,history:!1,editor:!0}},on:{Compiled:t.BlocksCompiled,Imported:t.BlocksImported}},[i("textik",{attrs:{name:"Текстичек"}}),i("linka",{attrs:{name:"Ссылочка",proto_id:"_link_rnd"}}),i("selectbox",{attrs:{name:"Селекбоксина",proto_id:"_rnd_selectbox"}}),i("inside",{attrs:{name:"Инсайдина",proto_id:"_rnd_insider"}}),i("calc",{attrs:{name:"Калькуляторша",proto_id:"_rnd_calc"}}),i("templateError",[t._v(" Упс! Блок не принадлежит этому элементу! ")])],1)],1)},h=[],f=i("99bb"),p=[{name:"Инсайдина",proto_id:"_rnd_insider",tag:"inside",active:!0,id:"_13035846_insider",data:{title:"ЭТО ИНСАЙДИНА ОГО",block_editor:[{name:"Текстичек",tag:"textik",active:!0,id:"10545519",data:{textColor:"black",num:4}},{name:"Инсайдина",proto_id:"_rnd_insider",tag:"inside",active:!0,id:"_29253092_insider",data:{title:"ЭТО ИНСАЙДИНА ОГО",block_editor:[]}}]}},{name:"Ссылочка",proto_id:"_link_rnd",tag:"linka",active:!1,id:"_link_28466793",data:{link:""}},{name:"Селекбоксина",proto_id:"_rnd_selectbox",tag:"selectbox",active:!0,id:"_10032672_selectbox",data:{list:["один","два","три"],myval:"один",newVal:""}},{name:"Ссылочка",proto_id:"_link_rnd",tag:"linka",active:!1,id:"_link_52459884",data:{link:"gdf"}},{name:"Ссылочка",proto_id:"_link_rnd",tag:"linka",active:!1,id:"_link_28254855",data:{link:"ggg"}},{name:"Ссылочка",proto_id:"_link_rnd",tag:"linka",active:!1,id:"_link_90594423",data:{link:"bbbb"}}],v={name:"Home",components:{BlockEditor:f["a"],textik:function(){return i.e("chunk-2f787f44").then(i.bind(null,"78b6"))},linka:function(){return i.e("chunk-5195114d").then(i.bind(null,"937c"))},selectbox:function(){return i.e("chunk-ddefc104").then(i.bind(null,"a3ad"))},inside:function(){return i.e("chunk-c382e2c8").then(i.bind(null,"eb71"))},calc:function(){return i.e("chunk-098fe5b4").then(i.bind(null,"bd8c"))}},data:function(){return{newData:p}},methods:{BlocksCompiled:function(t){console.log("BlocksCompiled",t)},BlocksImported:function(){console.log("Blocks Imported!")},load:function(){}},mounted:function(){}},m=v,k=Object(a["a"])(m,u,h,!1,null,"015bfab5",null),g=k.exports;o["a"].use(d["a"]);var b=[{path:"/",name:"Home",component:g},{path:"/about",name:"About",component:function(){return i.e("about").then(i.bind(null,"f820"))}}],y=new d["a"]({mode:"history",base:"/vue-block-editor/",routes:b}),_=y,E=i("2f62");o["a"].use(E["a"]);var B=new E["a"].Store({state:{},mutations:{},actions:{},modules:{}});o["a"].config.productionTip=!1,new o["a"]({router:_,store:B,render:function(t){return t(c)}}).$mount("#app")},"591e":function(t,e,i){},"780b":function(t,e,i){},"7faf":function(t,e,i){"use strict";i("b8ff")},8861:function(t,e,i){"use strict";i("bdc4")},"99bb":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["container","light"].concat(Object.keys(t.layout_options).filter((function(e){return t.layout_options[e]})).map((function(t){return t+"_enabled"}))),style:{"grid-template-columns":(t.layout_options.menu?"2fr":"")+" "+(t.layout_options.editor?"8fr":"")+" "+(t.layout_options.propertyEditor?"2fr":"")}},[t.layout_options.menu?i("div",{class:{blocks:!0}},t._l(t.availableBlocks,(function(e){var o;return i("draggable",{key:e.tag,staticClass:"dragArea list-group",attrs:{list:[e],draggable:".item",group:{name:"block_editor",pull:"clone",put:!1},clone:t.cloneBlockProto,move:t.moveBlock}},[i("div",{class:(o={block:!0,active:e.active},o["slot-draggable-"+e.tag]=!0,o.item=!0,o)},[t._v(" "+t._s(e.name)+" ")])])})),1):t._e(),t.layout_options.editor?i("div",{class:{editor:!0,mainEditor:t.isThisMainEditor,blockEditorSelected:t.blockEditorSelected},on:{click:t.editorClick}},[t.layout_options.history?[i("div",{staticClass:"history"},[i("button",{staticClass:"history_button undo",on:{click:t.HistoryUndo}},[i("svg",{staticClass:"bi bi-arrow-return-left",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[i("path",{attrs:{"fill-rule":"evenodd",d:"M14.5 1.5a.5.5 0 0 1 .5.5v4.8a2.5 2.5 0 0 1-2.5 2.5H2.707l3.347 3.346a.5.5 0 0 1-.708.708l-4.2-4.2a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 8.3H12.5A1.5 1.5 0 0 0 14 6.8V2a.5.5 0 0 1 .5-.5z"}})])]),i("button",{staticClass:"history_button redo",on:{click:t.HistoryRedo}},[i("svg",{staticClass:"bi bi-arrow-return-right",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[i("path",{attrs:{"fill-rule":"evenodd",d:"M1.5 1.5A.5.5 0 0 0 1 2v4.8a2.5 2.5 0 0 0 2.5 2.5h9.793l-3.347 3.346a.5.5 0 0 0 .708.708l4.2-4.2a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 8.3H3.5A1.5 1.5 0 0 1 2 6.8V2a.5.5 0 0 0-.5-.5z"}})])]),i("span",{staticStyle:{"margin-left":"10px","font-size":"10pt",position:"relative",top:"-2px",opacity:"0.5"}},[t._v("Step: "+t._s(null==t.history.step?"last":t.history.step)+"/"+t._s(t.history.compiled.length))])])]:t._e(),i("draggable",{class:["dragArea","list-group"].concat(t.draggableClasses),attrs:{draggable:".item",group:"block_editor","ghost-class":"ghost",touchStartThreshold:20,move:t.moveBlock},on:{start:t.BlockDragStart,end:t.BlockDragEnd,add:t.BlockDragAdded},model:{value:t.editor,callback:function(e){t.editor=e},expression:"editor"}},[t._l(t.editor,(function(e,o){return i("div",{key:e.id,class:["item","slot-draggable-"+e.tag],attrs:{tag:e.tag,block_id:e.id},on:{click:function(i){return t.SlotClick(e,i)}}},[i("add-block",{attrs:{newBlockIndex:o,availableBlocks:t.availableBlocks,copyBuffer:t.mainEditor().copyBuffer,editorTags:t.activeTags},on:{addBlock:t.modalMenuAddBlock,pasteBlocks:t.pasteBlocks}}),i("div",{class:{block:!0,selected:e.selected},attrs:{id:e.id}},[i("SlotRender",{ref:e.id,refInFor:!0,attrs:{tag:e.tag,block_id:e.id},on:{slotMounted:t.slotMounted}},[t._t("default")],2)],1),i("div",{class:{removeBlock:!0},on:{click:function(i){return t.removeBlockFromEditor(i,e)}}},[i("svg",{staticClass:"bi bi-x",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[i("path",{attrs:{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"}})])]),i("div",{class:{copyBlock:!0},on:{click:function(i){return t.copyBlock(i,e)}}},[i("svg",{staticClass:"bi bi-clipboard",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[i("path",{attrs:{d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"}}),i("path",{attrs:{d:"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"}})])])],1)})),i("add-block",{attrs:{availableBlocks:t.availableBlocks,first:0==t.editor.length,copyBuffer:t.mainEditor().copyBuffer,editorTags:t.activeTags},on:{addBlock:t.modalMenuAddBlock,pasteBlocks:t.pasteBlocks}})],2)],2):t._e(),t.layout_options.propertyEditor?i("div",{staticClass:"propedit"},[t.selectedBlock?[i("SlotRender",{key:"render_prop_"+t.selectedBlock.id,ref:"render_prop"+t.selectedBlock.id,attrs:{tag:t.selectedBlock.tag,block_id:t.selectedBlock.id,dataRef:t.selectedBlock.ref}},[t._t("default")],2)]:t._e()],2):t._e()])},n=[],r=i("5530"),a=i("b85c"),s=i("2909"),l=i("53ca");i("d81d"),i("b64b"),i("a9e3"),i("4de4"),i("caad"),i("2532"),i("a434"),i("7db0"),i("d3b7"),i("25f0"),i("5319"),i("ac1f"),i("0481"),i("b0c0"),i("fb6a"),i("ddb0");function c(t,e){var i=t.find((function(t){return t.tag==e}));return i}function d(t,e,i,o){var n=c(t.$slots.default,i);return n||(n=c(t.mainEditor().$slots.default,i)),n&&(n=e("div",n.children)),n||(n=e("div",[o])),t.error=!0,n}var u={name:"slot-render",render:function(t){var e=this,i=this.mainEditor().errorTypes,o=this.mainEditor().registeredEditors.map((function(t){var e;return null===(e=t.$slots)||void 0===e?void 0:e.default})).flat().filter((function(t){return t})).filter((function(t){return!i.includes(t.tag)})),n=o.find((function(t){var i;return(null===(i=t.componentOptions||t.asyncMeta)||void 0===i?void 0:i.tag)==e.tag}));if(n){if(n.asyncMeta)return t("div");var r=void 0;return r=this.dataRef?this.dataRef[0]?this.dataRef[0].error?d(this,t,"propertyEditorTemplateError","There is problem with template."):t(n.asyncFactory,{class:"show_property_popup",attrs:{isPropEditor:"yes"}},this.$slots.default):t("div"):t(n.asyncFactory,this.$slots.default),r}return console.log(this),console.log("REGISTERED EDITORS",this.mainEditor().registeredEditors),d(this,t,"templateError","Block template not found. Try to add it as a slot to this block-editor element.")},props:["tag","block_id","dataRef"],data:function(){return{setDataQuery:[],isSlotMounted:!1,error:!1,_cachedMainEditor:null}},methods:{getData:function(){if(this.$children[0])return this.$children[0].getData?this.$children[0].getData():JSON.parse(JSON.stringify(this.$children[0].$data))},setData:function(t){if(this.isSlotMounted)return this._setData(t);this.setDataQuery.push(t)},slotMounted:function(t){var e,i=null===(e=t.$children[0].$vnode.componentOptions)||void 0===e?void 0:e.Ctor.extendOptions.name,o=!1;if("block-content"!=i&&(console.warn("Root component of block template must be <block-content>."),o=!0),this.dataRef){var n=this.dataRef[0].$children[0];n?t._data=n._data:(console.warn("Component not mounted"),o=!0)}if(this.error=o||this.error,this.isSlotMounted=!0,t.$forceUpdate(),!this.dataRef){var r,s=Object(a["a"])(this.setDataQuery);try{for(s.s();!(r=s.n()).done;){var l=r.value;this._setData(l)}}catch(c){s.e(c)}finally{s.f()}}return this.$emit("slotMounted",{block_id:this.block_id,module:t,error:o})},_setData:function(t){if(0!=this.$children.length)return this.$children[0].setData?this.$children[0].setData(t):new Error("SlotRender: missing method setData() in ".concat(this.tag," template."))},unselectAllChildren:function(t,e){if(0!=this.$children.length&&this.$children[0]){var i,o=Object(a["a"])(this.$children[0].$children[0].$children);try{for(o.s();!(i=o.n()).done;){var n=i.value;"block-editor"==n.$vnode.componentOptions.Ctor.extendOptions.name&&n.unselectAllChildren(t,e)}}catch(r){o.e(r)}finally{o.f()}}},mainEditor:function(){if(this._cachedMainEditor)return this._cachedMainEditor;for(var t=[],e=this.$parent;;){if(!e.$vnode)break;if("block-editor"==e.$vnode.componentOptions.Ctor.extendOptions.name&&t.push(e),!e.$parent)break;e=e.$parent}var i=t.slice(-1)[0];return i||(i=this),this._cachedMainEditor=i,i}},mounted:function(){}},h=i("0c69"),f=i.n(h),p=i("d4cb"),v=i.n(p),m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:{addBlock:!0,createFirst:t.first}},[i("div",{staticClass:"line"}),i("div",{staticClass:"plusButton"},[i("svg",{staticClass:"bi bi-plus-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[i("path",{attrs:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}}),i("path",{attrs:{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"}})]),i("div",{staticClass:"blockMenuModal"},[t.editorTags.find((function(e){return t.copyBuffer.map((function(t){return t.tag})).includes(e)}))?[i("div",{staticClass:"item block",on:{click:t.paste}},[t._v(" paste ")])]:t._e(),t._l(t.availableBlocks.filter((function(e){return t.editorTags.includes(e.tag)})),(function(e){return i("div",{key:e.tag+"_menuModalBlock",staticClass:"item block",on:{click:function(i){return t.modalMenuAddBlock(i,e)}}},[t._v(" "+t._s(e.name)+" ")])}))],2)])])},k=[],g={components:{},props:{newBlockIndex:{type:Number,default:void 0},availableBlocks:{type:Array,default:function(){return[]}},first:{type:Boolean,default:!1},copyBuffer:{type:Array,default:function(){return[]}},editorTags:{type:Array,default:function(){return[]}}},data:function(){return{}},methods:{modalMenuAddBlock:function(t,e){this.$emit("addBlock",e,this.newBlockIndex),t.stopPropagation(),t.preventDefault()},paste:function(t,e){this.$emit("pasteBlocks",this.copyBuffer,this.newBlockIndex),t.stopPropagation(),t.preventDefault()}},mounted:function(){}},b=g,y=(i("f38f"),i("2877")),_=Object(y["a"])(b,m,k,!1,null,"ecd53258",null),E=_.exports;function B(t){var e=0;if("object"==Object(l["a"])(t))if(Array.isArray(t))t.map((function(t){return e+=B(t)}));else for(var i=0,o=Object.keys(t);i<o.length;i++){var n=o[i],r=t[n];"block_editor"!=n&&"data"!=n||("block_editor"==n&&e++,e+=B(r))}return e}var M=["propertyEditorTemplateError","templateError"],O={name:"block-editor",components:{SlotRender:u,draggable:f.a,addBlock:E},directives:{clickOutside:v.a},props:{layout:{type:Object,default:function(){return{menu:!1,editor:!0,history:!1,propertyEditor:!1}}},historyLength:{type:Number,default:14},values:{type:Array,default:function(){return[]}},blocksInclude:{type:Array,default:function(){return[]}},blocksExclude:{type:Array,default:function(){return[]}}},data:function(){return{availableBlocks:[],editor:[],slotsMounted:0,slotsMustBeMounted:0,layout_options:{menu:!1,editor:!0,history:!1,propertyEditor:!1},selectedBlock:null,_cachedMainEditor:null,selectBlockAfterMount:[],setDataToBlockAfterMount:[],copyBuffer:[],registeredEditors:[],errorTypes:M,draggableClasses:[],activeTags:[],isThisMainEditor:null,history:{compiled:[],step:null},blockEditorSelected:!1}},methods:{moveBlock:function(t){var e=Object(s["a"])(t.to.classList),i=Object(s["a"])(t.dragged.classList).filter((function(t){return t.includes("slot-draggable")}))[0],o=e.includes(i);return o},modalMenuAddBlock:function(t,e){var i=this.addBlockToEditor(t,e,!0);this.selectBlockAfterMount.push(i)},slotMounted:function(t){var e,i=this,o=Object(a["a"])(this.selectBlockAfterMount);try{var n=function(){var o=e.value;o.id==t.block_id&&(i.SlotClick(o),i.selectBlockAfterMount=i.selectBlockAfterMount.filter((function(t){return t.id!=o.id})))};for(o.s();!(e=o.n()).done;)n()}catch(c){o.e(c)}finally{o.f()}var r,s=Object(a["a"])(this.setDataToBlockAfterMount);try{var l=function(){var e=r.value;e.id==t.block_id&&(i.$refs[e.id][0].setData(e.data),i.setDataToBlockAfterMount=i.setDataToBlockAfterMount.filter((function(t){return t.id!=e.id})))};for(s.s();!(r=s.n()).done;)l()}catch(c){s.e(c)}finally{s.f()}this.isThisEditorIsMain()?(this.slotsMounted++,this.slotsMustBeMounted==this.slotsMounted&&this.Imported()):this.mainEditor().slotMounted(t)},addBlockToEditor:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=JSON.parse(JSON.stringify(t));return o.id=o.id||this.parseID(o),delete o.data,o.selected=!1,"undefined"!=typeof e?this.editor.splice(e,0,o):this.editor.push(o),this.mainEditor().editorChanged(i),o},removeBlockFromEditor:function(t,e){this.editor=this.editor.filter((function(t){return t.id!=e.id})),this.mainEditor().setSelectedBlock(null),this.mainEditor().unselectInBlockEditor(!1,!0,!0),this.mainEditor().editorChanged(!0),t.stopPropagation()},copyBlock:function(t,e){var i=JSON.parse(JSON.stringify(this.editor)).find((function(t){return t.id==e.id}));delete i.selected,delete i.id,i.data=this.$refs[e.id][0].getData(),this.mainEditor().addToCopyBuffer(i)},addToCopyBuffer:function(t){this.copyBuffer=[],this.copyBuffer.push(t),this.$forceUpdate()},pasteBlocks:function(t,e){console.log("pasteBlocks",this.$el,t,e);var i,o=0,n=Object(a["a"])(t);try{for(n.s();!(i=n.n()).done;){var s=i.value,l=void 0;l="undefined"!=typeof e?this.addBlockToEditor(s,e+o,!0):this.addBlockToEditor(s,void 0,!0),this.selectBlockAfterMount.push(l),this.setDataToBlockAfterMount.push(Object(r["a"])(Object(r["a"])({},l),{},{data:s.data})),o++}}catch(c){n.e(c)}finally{n.f()}},cloneBlockProto:function(t){var e=JSON.parse(JSON.stringify(t));return e.id=this.parseID(e),e},parseID:function(t){return t.proto_id?t.proto_id.replace(/rnd/g,Math.floor(99999999*Math.random()).toString()):Math.floor(99999999*Math.random()).toString()},Compile:function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=JSON.parse(JSON.stringify(this.editor)),o=Object(a["a"])(i);try{for(o.s();!(t=o.n()).done;){var n=t.value;delete n.selected,n.data=this.$refs[n.id][0].getData()}}catch(r){o.e(r)}finally{o.f()}return e&&this.$emit("Compiled",i),i},_setData:function(t){var e=this;this.editor=[];var i,o=Object(a["a"])(t);try{for(o.s();!(i=o.n()).done;){var n=i.value;this.addBlockToEditor(n)}}catch(r){o.e(r)}finally{o.f()}this.$nextTick((function(){var i,o=Object(a["a"])(t);try{var n=function(){var t=i.value;if(!e.editor.find((function(e){return e.id==t.id})))return"continue";e.$refs[t.id][0].setData(t.data)};for(o.s();!(i=o.n()).done;)n()}catch(r){o.e(r)}finally{o.f()}}))},importData:function(t){this.slotsMounted=0,this.slotsMustBeMounted=B(t)+t.length,this._setData(t)},Imported:function(){this.$emit("Imported"),this.history.compiled.push(this.Compile(!1))},BlockDragStart:function(t){var e=t.item.children[1].id,i=this.$refs[e][0],o=i.getData();window["tempDragDataBlockEditor_".concat(this.mainEditor()._uid)][e]=o},BlockDragEnd:function(t){var e=t.to.children[t.newDraggableIndex].children[1],i=e.id,o=this.editor.find((function(t){return t.id==i}));o&&(this.SlotClick(o),this.mainEditor().editorChanged(!0))},BlockDragAdded:function(t){var e=t.to.children[t.newDraggableIndex].children[1],i=e.id;if(window["tempDragDataBlockEditor_".concat(this.mainEditor()._uid)]){var o=window["tempDragDataBlockEditor_".concat(this.mainEditor()._uid)][i];if(o){var n=this.$refs[i][0];n.setData(o),window["tempDragDataBlockEditor_".concat(this.mainEditor()._uid)][i]={}}}var r=this.editor.find((function(t){return t.id==i}));r.selected=!1,r&&this.SlotClick(r),this.mainEditor().editorChanged(!0)},SlotClick:function(t,e,i){var o=this;t.selected||(this.mainEditor().setSelectedBlock(null),this.$nextTick((function(){o.mainEditor().setSelectedBlock(Object(r["a"])({ref:o.$refs[t.id]},t)),o.unselectInBlockEditor(!0),t.selected=!0,o.setAvailableBlocks([],!0)}))),e&&e.stopPropagation()},setAvailableBlocks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[];if(0==t.length){var o,n=this.mainEditor().registeredEditors.map((function(t){var e;return null===(e=t.$slots)||void 0===e?void 0:e.default})).flat().filter((function(t){return!M.includes(null===t||void 0===t?void 0:t.tag)})),r=[],s=Object(a["a"])(n);try{var l=function(){var t=o.value;return t?r.find((function(e){var i,o,n,r;return(null!==e&&void 0!==e&&e.componentOptions?null===e||void 0===e||null===(i=e.componentOptions)||void 0===i?void 0:i.tag:null===(o=e.asyncMeta)||void 0===o?void 0:o.tag)==(null!==t&&void 0!==t&&t.componentOptions?null===t||void 0===t||null===(n=t.componentOptions)||void 0===n?void 0:n.tag:null===t||void 0===t||null===(r=t.asyncMeta)||void 0===r?void 0:r.tag)}))?"continue":void r.push(t):"continue"};for(s.s();!(o=s.n()).done;)l()}catch(D){s.e(D)}finally{s.f()}if(0==this.blocksInclude.length&&0==this.blocksExclude.length){var c,d=Object(a["a"])(r);try{for(d.s();!(c=d.n()).done;){var u=c.value,h=u.data?u.data.attrs:u.asyncMeta.data.attrs,f=u.componentOptions?u.componentOptions.tag:u.asyncMeta.tag;i.push({name:h.name,proto_id:h.proto_id,tag:f,active:!0})}}catch(D){d.e(D)}finally{d.f()}}else{if(0==this.blocksInclude.length&&0!=this.blocksExclude.length){var p,v=Object(a["a"])(r);try{for(v.s();!(p=v.n()).done;){var m=p.value,k=m.data?m.data.attrs:m.asyncMeta.data.attrs,g=m.componentOptions?m.componentOptions.tag:m.asyncMeta.tag;i.push({name:k.name,proto_id:k.proto_id,tag:g,active:!this.blocksExclude.includes(g)})}}catch(D){v.e(D)}finally{v.f()}}if(0!=this.blocksInclude.length&&0==this.blocksExclude.length){var b,y=Object(a["a"])(r);try{for(y.s();!(b=y.n()).done;){var _=b.value,E=_.data?_.data.attrs:_.asyncMeta.data.attrs,B=_.componentOptions?_.componentOptions.tag:_.asyncMeta.tag;i.push({name:E.name,proto_id:E.proto_id,tag:B,active:this.blocksExclude.includes(B)})}}catch(D){y.e(D)}finally{y.f()}}if(0!=this.blocksInclude.length&&0!=this.blocksExclude.length){var O,w=Object(a["a"])(r);try{for(w.s();!(O=w.n()).done;){var C=O.value,x=C.data?C.data.attrs:C.asyncMeta.data.attrs,$=C.componentOptions?C.componentOptions.tag:C.asyncMeta.tag;i.push({name:x.name,proto_id:x.proto_id,tag:$,active:this.blocksExclude.includes($)&&!this.blocksExclude.includes($)})}}catch(D){w.e(D)}finally{w.f()}}}}else i=t;this.availableBlocks=i,0==this.draggableClasses.length&&(this.draggableClasses=i.filter((function(t){return t.active})).map((function(t){return"slot-draggable-"+t.tag}))),0==this.activeTags.length&&(this.activeTags=i.filter((function(t){return t.active})).map((function(t){return t.tag}))),!this.isThisEditorIsMain()&&0==t.length&&e&&this.mainEditor().setAvailableBlocks(i),this.$forceUpdate()},editorClick:function(t){if(this.unselectInBlockEditor(!1,!0,!0),this.blockEditorSelected=!0,this.mainEditor().setSelectedBlock(null),this.setAvailableBlocks([],!0),t)return t.stopPropagation()},unselectInBlockEditor:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.blockEditorSelected=!1;var i,o=Object(a["a"])(this.editor);try{for(o.s();!(i=o.n()).done;){var n=i.value;n.selected&&(n.selected=!1)}}catch(r){o.e(r)}finally{o.f()}this.$forceUpdate(),(t||e)&&this.mainEditor().unselectAllChildren(t,this.isThisEditorIsMain())},setSelectedBlock:function(t){this.selectedBlock=t},unselectAllChildren:function(){var t=arguments.length>1?arguments[1]:void 0;t!=this.isThisEditorIsMain()&&this.unselectInBlockEditor(!1,t);var e,i=Object(a["a"])(this.editor);try{for(i.s();!(e=i.n()).done;){var o=e.value;this.$refs[o.id]&&this.$refs[o.id][0].unselectAllChildren(!1,!0)}}catch(n){i.e(n)}finally{i.f()}this.$forceUpdate()},mainEditor:function(){if(this._cachedMainEditor)return this._cachedMainEditor;for(var t=[],e=this.$parent;;){if(!e.$vnode)break;if("block-editor"==e.$vnode.componentOptions.Ctor.extendOptions.name&&t.push(e),!e.$parent)break;e=e.$parent}var i=t.slice(-1)[0];return i||(i=this),this._cachedMainEditor=i,i},registerEditor:function(t){this.registeredEditors.push(t)},isThisEditorIsMain:function(){if(null!=this.isThisMainEditor)return this.isThisMainEditor;var t=!1;return this._uid==this.mainEditor()._uid&&(t=!0),this.isThisMainEditor=t,t},editorChanged:function(t){var e=this;t&&this.$nextTick((function(){e.$emit("Changed"),e.history.compiled.push(e.Compile(!1)),e.history.compiled=e.history.compiled.slice(-e.historyLength),e.history.step=null,console.log("editorChanged!",e.history.compiled)}))},HistoryUndo:function(){null==this.history.current_parenttep?this.history.step=this.history.compiled.length-2:this.history.step=this.history.step-1,this.history.step<0||this._setData(this.history.compiled[this.history.step])},HistoryRedo:function(){null!=this.history.step&&(this.history.step=this.history.compiled.length-1,null==this.history.step?this._setData(this.history.compiled[this.history.compiled.slice(-1)]):this._setData(this.history.compiled[this.history.step]),this.history.step=null)}},mounted:function(){this.isThisEditorIsMain()&&(window["tempDragDataBlockEditor_".concat(this._uid)]||(window["tempDragDataBlockEditor_".concat(this._uid)]={})),this.layout_options=Object(r["a"])(Object(r["a"])({},this.layout_options),this.layout),console.log("this.layout_options",this.layout_options),0!=this.values.length?this.importData(this.values):this.history.compiled.push([]),this.mainEditor().registerEditor(this),this.setAvailableBlocks()}},w=O,C=(i("2521"),i("8861"),i("2436"),Object(y["a"])(w,o,n,!1,null,"9675057e",null));e["a"]=C.exports},b8ff:function(t,e,i){},bdc4:function(t,e,i){},d4cb:function(t,e){function i(t){return"function"===typeof t.value||(console.warn("[Vue-click-outside:] provided expression",t.expression,"is not a function."),!1)}function o(t,e){if(!t||!e)return!1;for(var i=0,o=e.length;i<o;i++)try{if(t.contains(e[i]))return!0;if(e[i].contains(t))return!1}catch(n){return!1}return!1}function n(t){return"undefined"!==typeof t.componentInstance&&t.componentInstance.$isServer}t.exports={bind:function(t,e,r){if(i(e)){t.__vueClickOutside__={handler:s,callback:e.value};var a="ontouchstart"in document.documentElement?"touchstart":"click";!n(r)&&document.addEventListener(a,s)}function s(e){if(r.context){var i=e.path||e.composedPath&&e.composedPath();i&&i.length>0&&i.unshift(e.target),t.contains(e.target)||o(r.context.popupItem,i)||t.__vueClickOutside__.callback(e)}}},update:function(t,e){i(e)&&(t.__vueClickOutside__.callback=e.value)},unbind:function(t,e,i){var o="ontouchstart"in document.documentElement?"touchstart":"click";!n(i)&&t.__vueClickOutside__&&document.removeEventListener(o,t.__vueClickOutside__.handler),delete t.__vueClickOutside__}}},d868:function(t,e,i){},f38f:function(t,e,i){"use strict";i("780b")}});
//# sourceMappingURL=app.27e21511.js.map