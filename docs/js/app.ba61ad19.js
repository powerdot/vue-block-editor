(function(t){function e(e){for(var o,i,s=e[0],l=e[1],c=e[2],d=0,u=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);f&&f(e);while(u.length)u.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,i=1;i<n.length;i++){var s=n[i];0!==r[s]&&(o=!1)}o&&(a.splice(e--,1),t=l(l.s=n[0]))}return t}var o={},i={app:0},r={app:0},a=[];function s(t){return l.p+"js/"+({about:"about"}[t]||t)+"."+{about:"2c2b6d1b","chunk-0942ed32":"397d7e6b","chunk-1362bf2c":"91b635b4","chunk-5f9ff159":"045a75c7","chunk-a76d22b0":"34be4067","chunk-c1da00ec":"5e78a6c7"}[t]+".js"}function l(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(t){var e=[],n={"chunk-0942ed32":1,"chunk-1362bf2c":1,"chunk-5f9ff159":1,"chunk-a76d22b0":1,"chunk-c1da00ec":1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=new Promise((function(e,n){for(var o="css/"+({about:"about"}[t]||t)+"."+{about:"31d6cfe0","chunk-0942ed32":"0fdd39f8","chunk-1362bf2c":"0fdd39f8","chunk-5f9ff159":"0fdd39f8","chunk-a76d22b0":"0fdd39f8","chunk-c1da00ec":"0fdd39f8"}[t]+".css",r=l.p+o,a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var c=a[s],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===o||d===r))return e()}var u=document.getElementsByTagName("style");for(s=0;s<u.length;s++){c=u[s],d=c.getAttribute("data-href");if(d===o||d===r)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var o=e&&e.target&&e.target.src||r,a=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=o,delete i[t],f.parentNode.removeChild(f),n(a)},f.href=r;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){i[t]=0})));var o=r[t];if(0!==o)if(o)e.push(o[2]);else{var a=new Promise((function(e,n){o=r[t]=[e,n]}));e.push(o[2]=a);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=s(t);var u=new Error;c=function(e){d.onerror=d.onload=null,clearTimeout(f);var n=r[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",u.name="ChunkLoadError",u.type=o,u.request=i,n[1](u)}r[t]=void 0}};var f=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(e)},l.m=t,l.c=o,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)l.d(n,o,function(e){return t[e]}.bind(null,o));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/vue-block-editor/",l.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var f=d;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"300e":function(t,e,n){},"3de2":function(t,e,n){"use strict";n("52f8")},"4a9b":function(t,e,n){},"52f8":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],a=(n("5c0b"),n("2877")),s={},l=Object(a["a"])(s,i,r,!1,null,null,null),c=l.exports,d=n("8c4f"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("block-editor",{ref:"blockEditor",attrs:{values:t.newData,blocksExclude:["calc"],layout:{menu:!0,propertyEditor:!0,history:!1,editor:!0}},on:{Compiled:t.BlocksCompiled,Imported:t.BlocksImported}},[n("textik",{attrs:{name:"Текстичек"}}),n("linka",{attrs:{name:"Ссылочка",proto_id:"_link_rnd"}}),n("selectbox",{attrs:{name:"Селекбоксина",proto_id:"_rnd_selectbox"}}),n("inside",{attrs:{name:"Инсайдина",proto_id:"_rnd_insider"}}),n("calc",{attrs:{name:"Калькуляторша",proto_id:"_rnd_calc"}})],1)],1)},f=[],h=n("d3f0"),p=[{name:"Инсайдина",proto_id:"_rnd_insider",tag:"inside",active:!0,id:"_13035846_insider",data:{title:"ЭТО ИНСАЙДИНА ОГО",block_editor:[{name:"Текстичек",tag:"textik",active:!0,id:"10545519",data:{textColor:"black",num:4}},{name:"Инсайдина",proto_id:"_rnd_insider",tag:"inside",active:!0,id:"_29253092_insider",data:{title:"ЭТО ИНСАЙДИНА ОГО",block_editor:[]}}]}},{name:"Ссылочка",proto_id:"_link_rnd",tag:"linka",active:!1,id:"_link_28466793",data:{link:""}},{name:"Селекбоксина",proto_id:"_rnd_selectbox",tag:"selectbox",active:!0,id:"_10032672_selectbox",data:{list:["один","два","три"],myval:"один",newVal:""}},{name:"Ссылочка",proto_id:"_link_rnd",tag:"linka",active:!1,id:"_link_52459884",data:{link:"gdf"}},{name:"Ссылочка",proto_id:"_link_rnd",tag:"linka",active:!1,id:"_link_28254855",data:{link:"ggg"}},{name:"Ссылочка",proto_id:"_link_rnd",tag:"linka",active:!1,id:"_link_90594423",data:{link:"bbbb"}}],v={name:"Home",components:{BlockEditor:h["a"],textik:function(){return n.e("chunk-1362bf2c").then(n.bind(null,"78b6"))},linka:function(){return n.e("chunk-5f9ff159").then(n.bind(null,"937c"))},selectbox:function(){return n.e("chunk-c1da00ec").then(n.bind(null,"a3ad"))},inside:function(){return n.e("chunk-a76d22b0").then(n.bind(null,"eb71"))},calc:function(){return n.e("chunk-0942ed32").then(n.bind(null,"bd8c"))}},data:function(){return{newData:p}},methods:{BlocksCompiled:function(t){console.log("BlocksCompiled",t)},BlocksImported:function(){console.log("Blocks Imported!")},load:function(){}},mounted:function(){}},m=v,y=Object(a["a"])(m,u,f,!1,null,null,null),g=y.exports;o["a"].use(d["a"]);var b=[{path:"/",name:"Home",component:g},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],k=new d["a"]({mode:"history",base:"/vue-block-editor/",routes:b}),_=k,E=n("2f62");o["a"].use(E["a"]);var B=new E["a"].Store({state:{},mutations:{},actions:{},modules:{}});o["a"].config.productionTip=!1,new o["a"]({router:_,store:B,render:function(t){return t(c)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";n("9c0c")},"69cf":function(t,e,n){"use strict";n("4a9b")},"9c0c":function(t,e,n){},acd5:function(t,e,n){"use strict";n("300e")},bf51:function(t,e,n){"use strict";n("e5dd")},d3f0:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["container","light"].concat(Object.keys(t.layout_options).filter((function(e){return t.layout_options[e]})).map((function(t){return t+"_enabled"}))),style:{"grid-template-columns":(t.layout_options.menu?"2fr":"")+" "+(t.layout_options.editor?"8fr":"")+" "+(t.layout_options.propertyEditor?"2fr":"")}},[t.layout_options.menu?n("div",{class:{blocks:!0}},t._l(t.availableBlocks,(function(e){var o;return n("draggable",{key:e.tag,staticClass:"dragArea list-group",attrs:{list:[e],draggable:".item",group:{name:"block_editor",pull:"clone",put:!1},clone:t.cloneBlockProto,move:t.moveBlock}},[n("div",{class:(o={block:!0,active:e.active},o["slot-draggable-"+e.tag]=!0,o.item=!0,o)},[t._v(" "+t._s(e.name)+" ")])])})),1):t._e(),t.layout_options.editor?n("div",{class:{editor:!0,mainEditor:t.isThisMainEditor,blockEditorSelected:t.blockEditorSelected},on:{click:t.editorClick}},[t.layout_options.history?[n("div",{staticClass:"history"},[n("button",{staticClass:"history_button undo",on:{click:t.HistoryUndo}},[n("svg",{staticClass:"bi bi-arrow-return-left",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M14.5 1.5a.5.5 0 0 1 .5.5v4.8a2.5 2.5 0 0 1-2.5 2.5H2.707l3.347 3.346a.5.5 0 0 1-.708.708l-4.2-4.2a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 8.3H12.5A1.5 1.5 0 0 0 14 6.8V2a.5.5 0 0 1 .5-.5z"}})])]),n("button",{staticClass:"history_button redo",on:{click:t.HistoryRedo}},[n("svg",{staticClass:"bi bi-arrow-return-right",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M1.5 1.5A.5.5 0 0 0 1 2v4.8a2.5 2.5 0 0 0 2.5 2.5h9.793l-3.347 3.346a.5.5 0 0 0 .708.708l4.2-4.2a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 8.3H3.5A1.5 1.5 0 0 1 2 6.8V2a.5.5 0 0 0-.5-.5z"}})])]),n("span",{staticStyle:{"margin-left":"10px","font-size":"10pt",position:"relative",top:"-2px",opacity:"0.5"}},[t._v("Step: "+t._s(null==t.history.step?"last":t.history.step)+"/"+t._s(t.history.compiled.length))])])]:t._e(),n("draggable",{class:["dragArea","list-group"].concat(t.draggableClasses),attrs:{draggable:".item",group:"block_editor","ghost-class":"ghost",touchStartThreshold:20,move:t.moveBlock},on:{start:t.BlockDragStart,end:t.BlockDragEnd,add:t.BlockDragAdded},model:{value:t.editor,callback:function(e){t.editor=e},expression:"editor"}},[t._l(t.editor,(function(e,o){return n("div",{key:e.id,class:["item","slot-draggable-"+e.tag],attrs:{tag:e.tag,block_id:e.id},on:{click:function(n){return t.SlotClick(e,n)}}},[n("add-block",{attrs:{newBlockIndex:o,availableBlocks:t.availableBlocks,copyBuffer:t.mainEditor().copyBuffer,editorTags:t.activeTags},on:{addBlock:t.modalMenuAddBlock,pasteBlocks:t.pasteBlocks}}),n("div",{class:{block:!0,selected:e.selected},attrs:{id:e.id}},[n("SlotRender",{ref:e.id,refInFor:!0,attrs:{tag:e.tag,block_id:e.id},on:{slotMounted:t.slotMounted}},[t._t("default")],2)],1),n("div",{class:{removeBlock:!0},on:{click:function(n){return t.removeBlockFromEditor(n,e)}}},[n("svg",{staticClass:"bi bi-x",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"}})])]),n("div",{class:{copyBlock:!0},on:{click:function(n){return t.copyBlock(n,e)}}},[n("svg",{staticClass:"bi bi-clipboard",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"}}),n("path",{attrs:{d:"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"}})])])],1)})),n("add-block",{attrs:{availableBlocks:t.availableBlocks,first:0==t.editor.length,copyBuffer:t.mainEditor().copyBuffer,editorTags:t.activeTags},on:{addBlock:t.modalMenuAddBlock,pasteBlocks:t.pasteBlocks}})],2)],2):t._e(),t.layout_options.propertyEditor?n("div",{staticClass:"propedit"},[t.selectedBlock?[n("SlotRender",{key:"render_prop_"+t.selectedBlock.id,ref:"render_prop"+t.selectedBlock.id,attrs:{tag:t.selectedBlock.tag,block_id:t.selectedBlock.id,dataRef:t.selectedBlock.ref}},[t._t("default")],2)]:t._e()],2):t._e()])},i=[];function r(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=a(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,r=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw r}}}}function a(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function l(t,e){var n=t.find((function(t){return t.tag==e}));return n}function c(t,e,n,o){var i=l(t.$slots.default,n);return i||(i=l(t.mainEditor().$slots.default,n)),i&&(i=e("div",i.children)),i||(i=e("div",[o])),t.error=!0,i}var d={name:"slot-render",render:function(t){var e=this,n=this.mainEditor().errorTypes,o=this.mainEditor().registeredEditors.map((function(t){var e;return null===(e=t.$slots)||void 0===e?void 0:e.default})).flat().filter((function(t){return t})).filter((function(t){return!n.includes(t.tag)})),i=o.find((function(t){var n;return(null===(n=t.componentOptions||t.asyncMeta)||void 0===n?void 0:n.tag)==e.tag}));if(i){if(i.asyncMeta)return t("div");var r=void 0;return r=this.dataRef?this.dataRef[0]?this.dataRef[0].error?c(this,t,"propertyEditorTemplateError","There is problem with template."):t(i.asyncFactory,{class:"show_property_popup",attrs:{isPropEditor:"yes"}},this.$slots.default):t("div"):t(i.asyncFactory,this.$slots.default),r}return console.log(this),console.log("REGISTERED EDITORS",this.mainEditor().registeredEditors),c(this,t,"templateError","Block template not found. Try to add it as a slot to this block-editor element.")},props:["tag","block_id","dataRef"],data:function(){return{setDataQuery:[],isSlotMounted:!1,error:!1,_cachedMainEditor:null}},methods:{getData:function(){if(this.$children[0])return this.$children[0].getData?this.$children[0].getData():JSON.parse(JSON.stringify(this.$children[0].$data))},setData:function(t){if(this.isSlotMounted)return this._setData(t);this.setDataQuery.push(t)},slotMounted:function(t){var e,n=null===(e=t.$children[0].$vnode.componentOptions)||void 0===e?void 0:e.Ctor.extendOptions.name,o=!1;if("block-content"!=n&&(console.warn("Root component of block template must be <block-content>."),o=!0),this.dataRef){var i=this.dataRef[0].$children[0];i?t._data=i._data:(console.warn("Component not mounted"),o=!0)}if(this.error=o||this.error,this.isSlotMounted=!0,t.$forceUpdate(),!this.dataRef){var a,s=r(this.setDataQuery);try{for(s.s();!(a=s.n()).done;){var l=a.value;this._setData(l)}}catch(c){s.e(c)}finally{s.f()}}return this.$emit("slotMounted",{block_id:this.block_id,module:t,error:o})},_setData:function(t){if(0!=this.$children.length)return this.$children[0].setData?this.$children[0].setData(t):new Error("SlotRender: missing method setData() in ".concat(this.tag," template."))},unselectAllChildren:function(t,e){if(0!=this.$children.length&&this.$children[0]){var n,o=r(this.$children[0].$children[0].$children);try{for(o.s();!(n=o.n()).done;){var i=n.value;"block-editor"==i.$vnode.componentOptions.Ctor.extendOptions.name&&i.unselectAllChildren(t,e)}}catch(a){o.e(a)}finally{o.f()}}},mainEditor:function(){if(this._cachedMainEditor)return this._cachedMainEditor;for(var t=[],e=this.$parent;;){if(!e.$vnode)break;if("block-editor"==e.$vnode.componentOptions.Ctor.extendOptions.name&&t.push(e),!e.$parent)break;e=e.$parent}var n=t.slice(-1)[0];return n||(n=this),this._cachedMainEditor=n,n}},mounted:function(){}},u=n("0c69"),f=n.n(u),h=n("d4cb"),p=n.n(h),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{addBlock:!0,createFirst:t.first}},[n("div",{staticClass:"line"}),n("div",{staticClass:"plusButton"},[n("svg",{staticClass:"bi bi-plus-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}}),n("path",{attrs:{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"}})]),n("div",{staticClass:"blockMenuModal"},[t.editorTags.find((function(e){return t.copyBuffer.map((function(t){return t.tag})).includes(e)}))?[n("div",{staticClass:"item block",on:{click:t.paste}},[t._v(" paste ")])]:t._e(),t._l(t.availableBlocks.filter((function(e){return t.editorTags.includes(e.tag)})),(function(e){return n("div",{key:e.tag+"_menuModalBlock",staticClass:"item block",on:{click:function(n){return t.modalMenuAddBlock(n,e)}}},[t._v(" "+t._s(e.name)+" ")])}))],2)])])},m=[],y={name:"block-editor-add-block",components:{},props:{newBlockIndex:{type:Number,default:void 0},availableBlocks:{type:Array,default:function(){return[]}},first:{type:Boolean,default:!1},copyBuffer:{type:Array,default:function(){return[]}},editorTags:{type:Array,default:function(){return[]}}},data:function(){return{}},methods:{modalMenuAddBlock:function(t,e){this.$emit("addBlock",e,this.newBlockIndex),t.stopPropagation(),t.preventDefault()},paste:function(t,e){this.$emit("pasteBlocks",this.copyBuffer,this.newBlockIndex),t.stopPropagation(),t.preventDefault()}}},g=y,b=(n("acd5"),n("2877")),k=Object(b["a"])(g,v,m,!1,null,"692e17e6",null),_=k.exports;function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=S(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function O(t){return D(t)||A(t)||S(t)||C()}function C(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(t,e){if(t){if("string"===typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(t,e):void 0}}function A(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function D(t){if(Array.isArray(t))return x(t)}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function $(t){return $="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function T(t){var e=0;if("object"==$(t))if(Array.isArray(t))t.map((function(t){return e+=T(t)}));else for(var n=0,o=Object.keys(t);n<o.length;n++){var i=o[n],r=t[i];"block_editor"!=i&&"data"!=i||("block_editor"==i&&e++,e+=T(r))}return e}var I=["propertyEditorTemplateError","templateError"],j={name:"block-editor",components:{SlotRender:d,draggable:f.a,addBlock:_},directives:{clickOutside:p.a},props:{layout:{type:Object,default:function(){return{menu:!1,editor:!0,history:!1,propertyEditor:!1}}},historyLength:{type:Number,default:14},values:{type:Array,default:function(){return[]}},blocksInclude:{type:Array,default:function(){return[]}},blocksExclude:{type:Array,default:function(){return[]}}},data:function(){return{availableBlocks:[],editor:[],slotsMounted:0,slotsMustBeMounted:0,layout_options:{menu:!1,editor:!0,history:!1,propertyEditor:!1},selectedBlock:null,_cachedMainEditor:null,selectBlockAfterMount:[],setDataToBlockAfterMount:[],copyBuffer:[],registeredEditors:[],errorTypes:I,draggableClasses:[],activeTags:[],isThisMainEditor:null,history:{compiled:[],step:null},blockEditorSelected:!1}},methods:{moveBlock:function(t){var e=O(t.to.classList),n=O(t.dragged.classList).filter((function(t){return t.includes("slot-draggable")}))[0],o=e.includes(n);return o},modalMenuAddBlock:function(t,e){var n=this.addBlockToEditor(t,e,!0);this.selectBlockAfterMount.push(n)},slotMounted:function(t){var e,n=this,o=M(this.selectBlockAfterMount);try{var i=function(){var o=e.value;o.id==t.block_id&&(n.SlotClick(o),n.selectBlockAfterMount=n.selectBlockAfterMount.filter((function(t){return t.id!=o.id})))};for(o.s();!(e=o.n()).done;)i()}catch(l){o.e(l)}finally{o.f()}var r,a=M(this.setDataToBlockAfterMount);try{var s=function(){var e=r.value;e.id==t.block_id&&(n.$refs[e.id][0].setData(e.data),n.setDataToBlockAfterMount=n.setDataToBlockAfterMount.filter((function(t){return t.id!=e.id})))};for(a.s();!(r=a.n()).done;)s()}catch(l){a.e(l)}finally{a.f()}this.isThisEditorIsMain()?(this.slotsMounted++,this.slotsMustBeMounted==this.slotsMounted&&this.Imported()):this.mainEditor().slotMounted(t)},addBlockToEditor:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=JSON.parse(JSON.stringify(t));return o.id=o.id||this.parseID(o),delete o.data,o.selected=!1,"undefined"!=typeof e?this.editor.splice(e,0,o):this.editor.push(o),this.mainEditor().editorChanged(n),o},removeBlockFromEditor:function(t,e){this.editor=this.editor.filter((function(t){return t.id!=e.id})),this.mainEditor().setSelectedBlock(null),this.mainEditor().unselectInBlockEditor(!1,!0,!0),this.mainEditor().editorChanged(!0),t.stopPropagation()},copyBlock:function(t,e){var n=JSON.parse(JSON.stringify(this.editor)).find((function(t){return t.id==e.id}));delete n.selected,delete n.id,n.data=this.$refs[e.id][0].getData(),this.mainEditor().addToCopyBuffer(n)},addToCopyBuffer:function(t){this.copyBuffer=[],this.copyBuffer.push(t),this.$forceUpdate()},pasteBlocks:function(t,e){console.log("pasteBlocks",this.$el,t,e);var n,o=0,i=M(t);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=void 0;a="undefined"!=typeof e?this.addBlockToEditor(r,e+o,!0):this.addBlockToEditor(r,void 0,!0),this.selectBlockAfterMount.push(a),this.setDataToBlockAfterMount.push(B(B({},a),{},{data:r.data})),o++}}catch(s){i.e(s)}finally{i.f()}},cloneBlockProto:function(t){var e=JSON.parse(JSON.stringify(t));return e.id=this.parseID(e),e},parseID:function(t){return t.proto_id?t.proto_id.replace(/rnd/g,Math.floor(99999999*Math.random()).toString()):Math.floor(99999999*Math.random()).toString()},Compile:function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=JSON.parse(JSON.stringify(this.editor)),o=M(n);try{for(o.s();!(t=o.n()).done;){var i=t.value;delete i.selected,i.data=this.$refs[i.id][0].getData()}}catch(r){o.e(r)}finally{o.f()}return e&&this.$emit("Compiled",n),n},_setData:function(t){var e=this;this.editor=[];var n,o=M(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;this.addBlockToEditor(i)}}catch(r){o.e(r)}finally{o.f()}this.$nextTick((function(){var n,o=M(t);try{var i=function(){var t=n.value;if(!e.editor.find((function(e){return e.id==t.id})))return"continue";e.$refs[t.id][0].setData(t.data)};for(o.s();!(n=o.n()).done;)i()}catch(r){o.e(r)}finally{o.f()}}))},importData:function(t){this.slotsMounted=0,this.slotsMustBeMounted=T(t)+t.length,this._setData(t)},Imported:function(){this.$emit("Imported"),this.history.compiled.push(this.Compile(!1))},BlockDragStart:function(t){var e=t.item.children[1].id,n=this.$refs[e][0],o=n.getData();window["tempDragDataBlockEditor_".concat(this.mainEditor()._uid)][e]=o},BlockDragEnd:function(t){var e=t.to.children[t.newDraggableIndex].children[1],n=e.id,o=this.editor.find((function(t){return t.id==n}));o&&(this.SlotClick(o),this.mainEditor().editorChanged(!0))},BlockDragAdded:function(t){var e=t.to.children[t.newDraggableIndex].children[1],n=e.id;if(window["tempDragDataBlockEditor_".concat(this.mainEditor()._uid)]){var o=window["tempDragDataBlockEditor_".concat(this.mainEditor()._uid)][n];if(o){var i=this.$refs[n][0];i.setData(o),window["tempDragDataBlockEditor_".concat(this.mainEditor()._uid)][n]={}}}var r=this.editor.find((function(t){return t.id==n}));r.selected=!1,r&&this.SlotClick(r),this.mainEditor().editorChanged(!0)},SlotClick:function(t,e,n){var o=this;t.selected||(this.mainEditor().setSelectedBlock(null),this.$nextTick((function(){o.mainEditor().setSelectedBlock(B({ref:o.$refs[t.id]},t)),o.unselectInBlockEditor(!0),t.selected=!0,o.setAvailableBlocks([],!0)}))),e&&e.stopPropagation()},setAvailableBlocks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];if(0==t.length){var o,i=this.mainEditor().registeredEditors.map((function(t){var e;return null===(e=t.$slots)||void 0===e?void 0:e.default})).flat().filter((function(t){return!I.includes(null===t||void 0===t?void 0:t.tag)})),r=[],a=M(i);try{var s=function(){var t=o.value;return t?r.find((function(e){var n,o,i,r;return(null!==e&&void 0!==e&&e.componentOptions?null===e||void 0===e||null===(n=e.componentOptions)||void 0===n?void 0:n.tag:null===(o=e.asyncMeta)||void 0===o?void 0:o.tag)==(null!==t&&void 0!==t&&t.componentOptions?null===t||void 0===t||null===(i=t.componentOptions)||void 0===i?void 0:i.tag:null===t||void 0===t||null===(r=t.asyncMeta)||void 0===r?void 0:r.tag)}))?"continue":void r.push(t):"continue"};for(a.s();!(o=a.n()).done;)s()}catch(A){a.e(A)}finally{a.f()}if(0==this.blocksInclude.length&&0==this.blocksExclude.length){var l,c=M(r);try{for(c.s();!(l=c.n()).done;){var d=l.value,u=d.data?d.data.attrs:d.asyncMeta.data.attrs,f=d.componentOptions?d.componentOptions.tag:d.asyncMeta.tag;n.push({name:u.name,proto_id:u.proto_id,tag:f,active:!0})}}catch(A){c.e(A)}finally{c.f()}}else{if(0==this.blocksInclude.length&&0!=this.blocksExclude.length){var h,p=M(r);try{for(p.s();!(h=p.n()).done;){var v=h.value,m=v.data?v.data.attrs:v.asyncMeta.data.attrs,y=v.componentOptions?v.componentOptions.tag:v.asyncMeta.tag;n.push({name:m.name,proto_id:m.proto_id,tag:y,active:!this.blocksExclude.includes(y)})}}catch(A){p.e(A)}finally{p.f()}}if(0!=this.blocksInclude.length&&0==this.blocksExclude.length){var g,b=M(r);try{for(b.s();!(g=b.n()).done;){var k=g.value,_=k.data?k.data.attrs:k.asyncMeta.data.attrs,E=k.componentOptions?k.componentOptions.tag:k.asyncMeta.tag;n.push({name:_.name,proto_id:_.proto_id,tag:E,active:this.blocksExclude.includes(E)})}}catch(A){b.e(A)}finally{b.f()}}if(0!=this.blocksInclude.length&&0!=this.blocksExclude.length){var B,w=M(r);try{for(w.s();!(B=w.n()).done;){var O=B.value,C=O.data?O.data.attrs:O.asyncMeta.data.attrs,S=O.componentOptions?O.componentOptions.tag:O.asyncMeta.tag;n.push({name:C.name,proto_id:C.proto_id,tag:S,active:this.blocksExclude.includes(S)&&!this.blocksExclude.includes(S)})}}catch(A){w.e(A)}finally{w.f()}}}}else n=t;this.availableBlocks=n,0==this.draggableClasses.length&&(this.draggableClasses=n.filter((function(t){return t.active})).map((function(t){return"slot-draggable-"+t.tag}))),0==this.activeTags.length&&(this.activeTags=n.filter((function(t){return t.active})).map((function(t){return t.tag}))),!this.isThisEditorIsMain()&&0==t.length&&e&&this.mainEditor().setAvailableBlocks(n),this.$forceUpdate()},editorClick:function(t){if(this.unselectInBlockEditor(!1,!0,!0),this.blockEditorSelected=!0,this.mainEditor().setSelectedBlock(null),this.setAvailableBlocks([],!0),t)return t.stopPropagation()},unselectInBlockEditor:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.blockEditorSelected=!1;var n,o=M(this.editor);try{for(o.s();!(n=o.n()).done;){var i=n.value;i.selected&&(i.selected=!1)}}catch(r){o.e(r)}finally{o.f()}this.$forceUpdate(),(t||e)&&this.mainEditor().unselectAllChildren(t,this.isThisEditorIsMain())},setSelectedBlock:function(t){this.selectedBlock=t},unselectAllChildren:function(){var t=arguments.length>1?arguments[1]:void 0;t!=this.isThisEditorIsMain()&&this.unselectInBlockEditor(!1,t);var e,n=M(this.editor);try{for(n.s();!(e=n.n()).done;){var o=e.value;this.$refs[o.id]&&this.$refs[o.id][0].unselectAllChildren(!1,!0)}}catch(i){n.e(i)}finally{n.f()}this.$forceUpdate()},mainEditor:function(){if(this._cachedMainEditor)return this._cachedMainEditor;for(var t=[],e=this.$parent;;){if(!e.$vnode)break;if("block-editor"==e.$vnode.componentOptions.Ctor.extendOptions.name&&t.push(e),!e.$parent)break;e=e.$parent}var n=t.slice(-1)[0];return n||(n=this),this._cachedMainEditor=n,n},registerEditor:function(t){this.registeredEditors.push(t)},isThisEditorIsMain:function(){if(null!=this.isThisMainEditor)return this.isThisMainEditor;var t=!1;return this._uid==this.mainEditor()._uid&&(t=!0),this.isThisMainEditor=t,t},editorChanged:function(t){var e=this;t&&this.$nextTick((function(){e.$emit("Changed"),e.history.compiled.push(e.Compile(!1)),e.history.compiled=e.history.compiled.slice(-e.historyLength),e.history.step=null,console.log("editorChanged!",e.history.compiled)}))},HistoryUndo:function(){null==this.history.current_parenttep?this.history.step=this.history.compiled.length-2:this.history.step=this.history.step-1,this.history.step<0||this._setData(this.history.compiled[this.history.step])},HistoryRedo:function(){null!=this.history.step&&(this.history.step=this.history.compiled.length-1,null==this.history.step?this._setData(this.history.compiled[this.history.compiled.slice(-1)]):this._setData(this.history.compiled[this.history.step]),this.history.step=null)}},mounted:function(){this.isThisEditorIsMain()&&(window["tempDragDataBlockEditor_".concat(this._uid)]||(window["tempDragDataBlockEditor_".concat(this._uid)]={})),this.layout_options=B(B({},this.layout_options),this.layout),console.log("this.layout_options",this.layout_options),0!=this.values.length?this.importData(this.values):this.history.compiled.push([]),this.mainEditor().registerEditor(this),this.setAvailableBlocks()}},P=j,R=(n("bf51"),n("3de2"),n("69cf"),Object(b["a"])(P,o,i,!1,null,"1d4873ca",null));e["a"]=R.exports},d4cb:function(t,e){function n(t){return"function"===typeof t.value||(console.warn("[Vue-click-outside:] provided expression",t.expression,"is not a function."),!1)}function o(t,e){if(!t||!e)return!1;for(var n=0,o=e.length;n<o;n++)try{if(t.contains(e[n]))return!0;if(e[n].contains(t))return!1}catch(i){return!1}return!1}function i(t){return"undefined"!==typeof t.componentInstance&&t.componentInstance.$isServer}t.exports={bind:function(t,e,r){if(n(e)){t.__vueClickOutside__={handler:s,callback:e.value};var a="ontouchstart"in document.documentElement?"touchstart":"click";!i(r)&&document.addEventListener(a,s)}function s(e){if(r.context){var n=e.path||e.composedPath&&e.composedPath();n&&n.length>0&&n.unshift(e.target),t.contains(e.target)||o(r.context.popupItem,n)||t.__vueClickOutside__.callback(e)}}},update:function(t,e){n(e)&&(t.__vueClickOutside__.callback=e.value)},unbind:function(t,e,n){var o="ontouchstart"in document.documentElement?"touchstart":"click";!i(n)&&t.__vueClickOutside__&&document.removeEventListener(o,t.__vueClickOutside__.handler),delete t.__vueClickOutside__}}},e5dd:function(t,e,n){}});
//# sourceMappingURL=app.ba61ad19.js.map